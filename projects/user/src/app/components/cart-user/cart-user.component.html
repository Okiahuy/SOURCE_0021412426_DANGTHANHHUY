<div id="a" class="alert alert-success" style="display:none;position: absolute; top: 20px; left: 50%; transform: translateX(-50%); z-index: 1050; width: 700px;">
  <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
  <strong>Bạn đã đặt hàng thành công</strong>
</div>

<div *ngIf="fullName && userID; else nouser" style="text-align: center; justify-content: center; align-items: center;">
    <div *ngIf="cartItems.length > 0; else emptyCart">
      <h2>Giỏ hàng của bạn</h2>
      <form (ngSubmit)="openOrderModal()">
        <table class="table table-striped">
          <thead>
            <tr>
              <th>#</th>
              <th>Chọn</th>
              <th>Ảnh</th>
              <th>Tên</th>
              <th>Màu sắc</th>
              <th>Dành Cho</th>
              <th>Số lượng</th>
              <th>Giá</th>
              <th>Tổng tiền</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of cartItems; let i = index">
              <td>{{ i + 1 }}</td>
                <td><input type="checkbox" [(ngModel)]="item.selected" name="selected_{{i}}" (change)="updateTotalPrice()"></td>    
              <td><img [src]="'http://localhost:8081/uploads/'+item.productImage" alt="Product Image" width="100" height="100"></td>
              <td>{{ item.productName }}</td>
              <td>{{ colors[item.productColor] }}</td> <!-- Hiển thị tên màu -->
              <td>{{ categories[item.productCategory] }}</td>
              <td>
                <button type="button" class="btn btn-sm btn-light" (click)="decreaseQuantity(item.cartID)" [disabled]="item.quantity <= 1">-</button>
                {{ item.quantity }}
                <button type="button" class="btn btn-sm btn-light" (click)="increaseQuantity(item.cartID)" [disabled]="item.quantity >= 10">+</button>
              </td>
              <td>{{ item.productPrice | currency: 'VND':'':'1.0-0' }} đ</td>
              <td>{{ item.quantity * item.productPrice | currency: 'VND':'':'1.0-0' }} đ</td>
              <td><button type="button" class="btn btn-sm btn-light" (click)="deleteCart(item.cartID)"><i class="ri-delete-bin-fill"></i></button></td>
            </tr>
          </tbody>   
        </table>
        <div><h3>Tổng tiền: <h3 class="pull-right">{{totalPrice | currency: 'VND':'':'1.0-0' }} đ</h3></h3></div>
        <button type="submit" class="btn btn-info" data-toggle="modal" data-target="#addCategoryModal">ĐẶT HÀNG</button>
    </form>
    </div>
    <br>
    <ng-template #emptyCart>
      <br>
      <div class="alert alert-primary text-center">
          <h4>GIỎ HÀNG TRỐNG</h4>
         
           </div>
    </ng-template>
  </div>
  <ng-template #nouser>
    <br>
    <div class="alert alert-primary text-center">
        <h4>MỜI BẠN ĐĂNG NHẬP ĐỂ XEM GIỎ HÀNG</h4>
        <button class="btn btn-info" (click)="onclick()" >ĐĂNG NHẬP NGAY</button>
         </div>
  </ng-template>

<!-- Modal Hiển Thị Đơn Hàng -->
<div class="modal fade" id="addCategoryModal" tabindex="-1" aria-labelledby="addCategoryModal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="orderModalLabel">Xác Nhận Đơn Hàng</h5>
        <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <!-- style="display: none;" -->
        <p><strong>Phương thức thanh toán:</strong></p>
         <h4>{{ orderRequest.paymentID ? "Thanh Toán Khi Nhận Hàng" : "Khác" }}</h4>

        <p><strong>Tổng tiền:</strong> {{ orderRequest.totalPrice | currency: 'VND':'':'1.0-0' }} đ</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Hủy</button>
        <button type="button" class="btn btn-info" (click)="submitPayment()">Xác Nhận</button>
      </div>
    </div>
  </div>
</div>

  